{% extends "layouts/main.twig" %}

{% block header %}{{ parent() }}{% endblock %}

{% block main %}
{# <section class="w-1/2 m-auto flex"> #}
    <section class="m-auto 2xl:flex 2xl:w-5/6">
    <form action="/create" method="POST" class="space-y-4 bg-white rounded-lg p-8 mt-4 mr-2 xl:w-full">
        <h2 class="text-3xl font-bold mb-6 text-center">Maak een nieuwe post</h2>
        <!-- Theme buttons in a styled fieldset -->
        <fieldset class="space-x-4 border-4 border-amber-200 p-4 rounded-md">
            <legend class="text-lg font-semibold">Kies een thema</legend>
            <button type="button" class="theme-button bg-gray-300 text-black px-4 py-2 rounded"
                data-theme="light">Light</button>
            <button type="button" class="theme-button bg-gray-800 text-white px-4 py-2 rounded"
                data-theme="dark">Dark</button>
            <button type="button" class="theme-button bg-yellow-500 text-black px-4 py-2 rounded"
                data-theme="solarized">Solarized</button>
            <button type="button" class="theme-button bg-purple-600 text-white px-4 py-2 rounded"
                data-theme="monokai">Monokai</button>
        </fieldset>

        <!-- Verborgen veld voor het geselecteerde thema -->
        <input type="hidden" id="selected_theme" name="selected_theme" value="light"> <!-- Default is light -->

        <!-- Titel -->
        <div>
            <label for="title" class="block text-lg font-medium text-gray-700">Titel</label>
            <input type="text" id="title" name="title"
                class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required>
        </div>

        <!-- Content -->
        <div>
            <label for="content" class="block text-lg font-medium text-gray-700">Content</label>
            <textarea id="content" name="content"
                class="border p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows="5" required></textarea>
        </div>

        <!-- Taal -->
        <div>
            <label for="language" class="block text-lg font-medium text-gray-700">Taal</label>
            <select name="language" id="language"
                class="border p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">Selecteer een taal</option>
                {% for language in languages %}
                <option value="{{ language.language }}">{{ language.language }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Nieuwe taal -->
        <div>
            <label for="new_language" class="block text-lg font-medium text-gray-700">Of voeg een nieuwe taal
                toe</label>
            <input type="text" id="new_language" name="new_language"
                class="border p-3 w-full rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Nieuwe taal (optioneel)">
        </div>

        <!-- Code content -->
        <div>
            <label for="language_content" class="block text-lg font-medium text-gray-700">Code</label>
            <textarea name="language_content" id="language_content"
                class="w-full p-3 mt-1 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows="5" required></textarea>
        </div>

        <!-- Caption -->
        <div>
            <label for="caption" class="block text-lg font-medium text-gray-700">Caption</label>
            <input type="text" id="caption" name="caption"
                class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        <!-- Submit button -->
        <div>
            <button type="submit"
                class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200">
                Post maken
            </button>
        </div>
    </form>

    <!-- Voorbeeld post -->
        <section class="mt-8 2xl:w-1/3">
        <h2 class="text-2xl font-semibold">Voorbeeld Post:</h2>
        <div id="example-post" class="code-block light">
            <h3 id="example-post-title" class="text-xl font-bold">Voorbeeld Titel</h3>
            <pre id="example-post-content" class="language-php"><code class="php">echo "Hello, World!";</code></pre>
        </div>
    </section>
</section>


{% endblock %}

{% block extra_scripts %}
{{ parent() }}
<script>
    // Haal alle thema knoppen op
    const themeButtons = document.querySelectorAll('.theme-button');
    const selectedThemeInput = document.getElementById('selected_theme');
    const examplePost = document.getElementById('example-post');
    const examplePostContent = document.getElementById('example-post-content');

    themeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const theme = button.getAttribute('data-theme');
            selectedThemeInput.value = theme; // Zet de waarde van het geselecteerde thema

            // Verander de class van de voorbeeldpost
            examplePost.className = `code-block ${theme}`;  // Update de klasse van de voorbeeldpost

            // Highlight de inhoud van de code in de voorbeeldpost
            hljs.highlightBlock(examplePostContent);  // Markeer de code in de voorbeeldpost
        });
    });
</script>
{% endblock %}